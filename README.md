# Каталог виджетов

## Описание
Этот проект реализует фронтенд-виджет, который функционирует как каталог товаров с возможностями отображения товаров, фильтрации и корзины. Виджет разработан для инициализации внешним кодом, позволяющим указывать идентификаторы дилеров. Если список дилеров не указан, будут загружены товары всех дилеров.

## Функционал

### Страницы
Виджет включает в себя заголовок со счетчиком товаров и три основные страницы:
1.  **Главная страница**: Отображает карусель с ограничением в 5 видимых карточек товаров, показывая товары с минимальной ценой от 10. Если после фильтрации доступно менее 5 товаров, будут отображены любые 8 товаров.
2.  **Страница каталога**: Предоставляет функционал для отображения карточек товаров и фильтрации.
3.  **Страница корзины**: Показывает список добавленных товаров с возможностью удаления отдельных позиций или очистки всей корзины, а также блок с итоговой стоимостью.

### Фильтрация
Страница каталога предлагает следующие опции фильтрации:
*   **Сортировка по дилеру**: Кнопки в виде тегов с возможностью множественного выбора.
*   **Сортировка по стоимости**: Три состояния: неактивно, по возрастанию, по убыванию.

### Карточка товара
Каждая карточка товара включает:
*   Фото
*   Заголовок
*   Стоимость
*   Кнопка "Добавить в корзину"
*   Для товаров, уже находящихся в корзине, доступны опции удаления одной единицы, просмотра количества и добавления еще одной единицы (минус, счетчик, плюс).

### Общие примечания
*   Выбранные параметры фильтрации сохраняются в URL.
*   Карточки товаров поддерживают множественное добавление в корзину.
*   Состояние виджета должно восстанавливается после перезагрузки страницы.
*   Добавленные товары в корзину сохраняются в `localStorage` по умолчанию на 10 минут.
*   В заголовке отображается ссылка на корзину со счетчиком добавленных товаров.

## Технические требования
*   **Стек**: React, MobX, TypeScript, Webpack, Ant Design (AntD), SCSS.
*   **Адаптивность**: Требуется адаптация под разные размеры экранов.
*   **Стилизация**: Стили виджета должны быть изолированы и независимы от стилей хост-сайта. Используется `ConfigProvider prefixCls="ant-widget"` для изоляции стилей Ant Design.
*   **Дизайн**: Дизайн на усмотрение разработчика.

## Структура проекта
```
├── App.tsx                 // Основной компонент приложения, маршрутизация
├── components/             // Переиспользуемые компоненты (Header, Filters, ProductCard)
├── index.tsx               // Точка входа виджета, инициализация и рендеринг
├── pages/                  // Страницы виджета (MainPage, CatalogPage, CartPage)
├── services/               // Сервисы для взаимодействия с API
├── setupTests.ts           // Настройка тестовой среды
├── stores/                 // MobX-хранилища для управления состоянием (CartStore, GoodsStore, FilterStore, DealersStore, RootStore)
├── styles/                 // Глобальные стили и стили компонентов
└── types.ts                // Определение типов данных и интерфейсов
```

## API-эндпоинты

*   **Получить список товаров всех дилеров**:
    `GET https://test-frontend.dev.int.perx.ru/api/goods/`
*   **Получить список товаров для определенных дилеров**:
    `GET https://test-frontend.dev.int.perx.ru/api/goods/?dealers=0c4aab30,86e64a33`
*   **Получить список идентификаторов дилеров**:
    `GET https://test-frontend.dev.int.perx.ru/api/dealers/`
*   **Изображение товара**:
    `GET https://test-frontend.dev.int.perx.ru/logo/node.png`

## Пример скрипта инициализации

```html
<!doctype html>
<html>
 <head>
   <meta charset="UTF-8" />
   <meta
     name="viewport"
     content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
   />
   <meta http-equiv="X-UA-Compatible" content="ie=edge" />
   <title>Виджет каталог</title>
 </head>


 <body>
   <div id="widget-catalog"></div>
   <script type="text/javascript">
     function ready() {


       window.widgetCatalog = new WidgetCatalog({el: '#widget-catalog', dealers: []});
       window.widgetCatalog.run();
     }


     document.addEventListener('DOMContentLoaded', ready);
   </script>
 </body>
</html>
```
